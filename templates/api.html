<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>API-handbok ‚Äî MoodWeather</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <link rel="stylesheet" href="/static/api.css" />
</head>
<body>
  <div class="page-bg" aria-hidden="true"></div>

  <div class="shell">
    <header class="glass-nav">
      <div class="brand">
        <div class="brand-icon" aria-hidden="true">üåßÔ∏è</div>
        <div class="brand-title">MoodWeather</div>
      </div>

      <nav class="nav-links" aria-label="Primary">
        <a href="/" class="nav-link">Home</a>
        <a href="/#about" class="nav-link">About Project</a>
        <a href="/api" class="nav-link active" rel="documentation">API Docs</a>
      </nav>
    </header>

    <main class="glass-main">
      <div class="page">
        <header class="topbar">
          <h1>MoodWeather ‚Äì API-handbok</h1>
          <nav class="links" aria-label="Documentation links">
            <a href="/" class="pill">‚Üê Tillbaka</a>
            <a href="/docs" class="pill">Swagger</a>
            <a href="/openapi.json" class="pill">OpenAPI</a>
          </nav>
        </header>

        <section class="card">
          <h2>√ñversikt</h2>
          <p class="muted">
            MoodWeather √§r en webbtj√§nst som rekommenderar musik baserat p√• v√§derf√∂rh√•llanden.
            Systemet best√•r av en frontend (webbklient) och ett backend-API byggt med FastAPI.
          </p>
          <p class="muted">
            Frontend kommunicerar endast med v√•rt eget API. All logik f√∂r v√§dertolkning,
            mood-analys och musikval sker p√• serversidan.
          </p>
        </section>

        <section class="card">
          <h2>Vad r√§knas som API i detta projekt?</h2>
          <ul class="muted">
            <li><strong>V√•rt API (Backend):</strong> FastAPI-endpoints under <code>/api/</code></li>
            <li><strong>Externa API:er:</strong> OpenWeather (v√§derdata) och Audius (musik)</li>
            <li><strong>Browser API:</strong> Geolocation via <code>navigator.geolocation</code></li>
          </ul>
          <p class="muted">
            Platsdetektering sker i webbl√§saren, men koordinater skickas vidare till v√•rt backend-API
            som i sin tur h√§mtar v√§derdata och genererar rekommendationen.
          </p>
        </section>

        <section class="card">
          <h2>API-design ‚Äì tanke och arkitektur</h2>
          <ul class="muted">
            <li>Frontend ska vara enkel och inte inneh√•lla aff√§rslogik</li>
            <li>Alla API-nycklar h√•lls p√• serversidan (.env)</li>
            <li>Samma svarformat anv√§nds oavsett om plats anges manuellt eller automatiskt</li>
            <li>Rekommendationer ska vara f√∂rklarbara (weather ‚Üí mood ‚Üí keywords)</li>
          </ul>
        </section>

        <section class="card">
          <h2>Hur rekommendationen fungerar</h2>
          <ol class="muted">
            <li>Anv√§ndaren anger plats (stad eller geolocation)</li>
            <li>Backend h√§mtar aktuellt v√§der fr√•n OpenWeather</li>
            <li>V√§derdata analyseras (temperatur, molnighet, dag/natt, vind, nederb√∂rd)</li>
            <li>En musikprofil ber√§knas (energy och valence)</li>
            <li>Profilen √∂vers√§tts till keywords</li>
            <li>Backend s√∂ker spellistor via Audius API</li>
            <li>Den b√§st matchande spellistan returneras till frontend</li>
          </ol>
        </section>

        <section class="card">
          <h2>Endpoints ‚Äì v√•rt API</h2>

          <div class="endpoint">
            <div class="sig">
              <span class="method">GET</span>
              <span class="path">/api/recommend?location=&lt;city&gt;</span>
            </div>
            <p class="muted">Anv√§nds n√§r anv√§ndaren manuellt anger en stad.</p>
            <pre class="code">/api/recommend?location=London</pre>
          </div>

          <div class="endpoint">
            <div class="sig">
              <span class="method">GET</span>
              <span class="path">/api/recommend/coords?lat=&lt;float&gt;&amp;lon=&lt;float&gt;</span>
            </div>
            <p class="muted">Anv√§nds tillsammans med webbl√§sarens platsdetektering.</p>
            <pre class="code">/api/recommend/coords?lat=55.6053&lon=13.0002</pre>
          </div>

          <div class="endpoint">
            <div class="sig">
              <span class="method">GET</span>
              <span class="path">/api/music/playlist/{playlist_id}/tracks</span>
            </div>
            <p class="muted">Returnerar tracks och stream-URL f√∂r uppspelning via HTML5 audio.</p>
          </div>
        </section>

        <section class="card">
          <h2>Felhantering</h2>
          <ul class="muted">
            <li><strong>200 OK</strong> ‚Äì lyckad beg√§ran</li>
            <li><strong>404</strong> ‚Äì plats eller spellista hittades inte</li>
            <li><strong>500</strong> ‚Äì serverkonfiguration saknas (t.ex. API-nyckel)</li>
            <li><strong>502</strong> ‚Äì externt API svarar inte korrekt</li>
          </ul>
        </section>

        <section class="card">
          <h2>Interaktiv API-dokumentation</h2>
          <p class="muted">
            F√∂r detaljerad och uppdaterad dokumentation av alla endpoints anv√§nds FastAPI:s
            automatiskt genererade Swagger-gr√§nssnitt.
          </p>
          <ul class="muted">
            <li><a href="/docs">/docs (Swagger UI)</a></li>
            <li><a href="/openapi.json">/openapi.json</a></li>
          </ul>
        </section>
      </div>
    </main>

    <footer class="app-footer">
      This is just a dummy design for now! we gonna change almost everything
    </footer>
  </div>
</body>
</html>